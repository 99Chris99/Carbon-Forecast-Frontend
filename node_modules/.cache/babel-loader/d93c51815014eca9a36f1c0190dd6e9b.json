{"ast":null,"code":"var _jsxFileName = \"/Users/Chris/Development/Final-Project/carbon-forecast-frontend/src/components/Timeline.js\";\nimport React, { Component } from 'react';\nimport { XYPlot, LineSeries, MarkSeries, HorizontalGridLines, Hint, XAxis, YAxis, Borders, VerticalGridLines, HorizontalBarSeries, GradientDefs, AreaSeries, FlexibleXYPlot, LabelSeries } from 'react-vis';\nimport { Sticky, Header, Table } from 'semantic-ui-react';\nimport { withScroll } from 'react-window-decorators'; // @withScroll\n\nclass Timeline extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      rawData: [{\n        y: 0,\n        x: 0,\n        label: 'loading | loadidng'\n      }],\n      barPosition: {\n        date: '',\n        offset: 0\n      },\n      labelData: [{\n        lable: 'Testing'\n      }],\n      height: 50,\n      middle: typeof this.props.middle !== 'undefined' ? this.props.mediumLevel : 150,\n      value: null,\n      // position:1000,\n      stickyTop: 0,\n      plotTop: 0,\n      gapVal: 1000,\n      scrollCount: 0,\n      initalScrollCounter: 0,\n      dataIndex: -1,\n      position: this.props.scrollPositionY,\n      scrollPlots: [],\n      getLevel: 0\n    };\n\n    this.scrollPlots = () => {\n      let scrollPlots = this.state.rawData.map((point, index) => {\n        let data = {\n          y: this.state.plotGap * (index + 1),\n          level: point.x\n        };\n        return data;\n      });\n      this.setState({\n        scrollPlots: scrollPlots\n      });\n    };\n\n    this.getLevel = () => {\n      let currY = this.props.scrollPositionY;\n      let newArray = this.state.scrollPlots.map(obj => {\n        return obj.y;\n      });\n      let closest = newArray.reduce((prev, curr) => {\n        return Math.abs(curr - currY) < Math.abs(prev - currY) ? curr : prev;\n      });\n      let found = this.state.scrollPlots.find(obj => {\n        return obj.y === closest;\n      });\n      this.setState({\n        currentLevel: found.level\n      }); //return found.level \n    };\n\n    this.manageScrollDisplay = () => {\n      let initalScrollCounter = this.state.initalScrollCounter < 1 ? this.state.gapVal + this.state.stickyTop : this.state.initalScrollCounter; //let dataIndex = 0\n\n      if (this.props.scrollPositionY >= initalScrollCounter) {\n        console.log('I love you chris!'); //this.setState({scrollCount: initalScrollCounter})\n\n        if (this.props.scrollPositionY >= initalScrollCounter + Math.abs(this.state.scrollCount)) {\n          //let newVal = this.state.scrollCount + this.state.gapVal\n          const step = this.state.chartTop - this.state.plotTop;\n          console.log(\"Youve got this\" + this.state.scrollCount);\n          console.log(this.state.scrollCount);\n          const scroll = this.state.scrollCount + step;\n          let newIndex = this.state.dataIndex + 1;\n          this.setState({\n            scrollCount: scroll,\n            dataIndex: newIndex\n          });\n        }\n      }\n    };\n\n    this.parseDate = (input, timeOrDate) => {\n      let output = 0;\n      let optionsDate = {\n        weekday: 'short',\n        day: 'numeric',\n        month: 'numeric'\n      };\n      let optionsTime = {\n        hour: 'numeric',\n        minute: 'numeric',\n        hour12: true\n      };\n      let options24 = {\n        hour: 'numeric',\n        minute: 'numeric',\n        hour12: false\n      };\n      let parsedDate = new Date(Date.UTC(parseInt(input.slice(0, 4), 10), parseInt(input.slice(5, 7), 10) - 1, parseInt(input.slice(8, 10), 10), parseInt(input.slice(11, 13), 10), parseInt(input.slice(14, 16), 10) //parseInt(input.slice(13,15), 10)\n      ));\n\n      if (timeOrDate === 'time') {\n        output = parsedDate.toLocaleString(\"en-GB\", optionsTime);\n      } else if (timeOrDate === 'date') {\n        output = \"\".concat(parsedDate.toLocaleString(\"en-GB\", optionsDate));\n      } else if (timeOrDate === '24') {\n        output = parsedDate.toLocaleString(\"en-GB\", options24);\n      }\n\n      return output;\n    };\n\n    this.lowCarbonLabel = item => {\n      let output = '';\n\n      if (item.text.split(' ')[0] === 'Low' || item.text.split(' ')[1] === 'Low') {\n        output = 'This is a good time to use electricity!';\n      }\n\n      return output;\n    };\n\n    this.formatData = () => {\n      let data = [];\n      let labelData = [];\n      let dayLabels = [];\n      let middleVal = this.props.middle; //let middle = this.props.timelineVals[this.props.timelineVals.length-1].level / 2 \n\n      if (this.props.timelineVals !== []) {\n        this.props.timelineVals.map((item, index) => {\n          let bar = {\n            x: item.level - 10,\n            y: -index,\n            label: \"\".concat(this.lowCarbonLabel(item)),\n            yOffset: -25\n          };\n          data = [...data, bar];\n        });\n        this.props.timelineVals.map((item, index) => {\n          let barLabel = {\n            x: 0,\n            y: -index,\n            label: \"\".concat(this.parseDate(item.from, 'time')),\n            xOffset: -60\n          };\n          labelData = [...labelData, barLabel];\n        });\n        this.props.timelineVals.map((item, index) => {\n          // let middle = this.props.screenWidth / 2\n          // let middle = this.state.rawData[this.state.rawData-1].x / 2 \n          //middle += 100\n          let day = '';\n\n          if (parseInt(\"\".concat(this.parseDate(item.from, '24'))) < 1 || index < 1) {\n            day = \"\".concat(this.parseDate(item.from, 'date'));\n            console.log(day);\n          }\n\n          let dayLabel = {\n            x: this.state.middle,\n            y: -index,\n            label: day,\n            xOffset: this.props.mobileUser ? 0 : -30,\n            yOffset: -15\n          };\n          dayLabels = [...dayLabels, dayLabel];\n        });\n      } //console.log(data)\n\n\n      this.setState({\n        rawData: data,\n        labelData: labelData,\n        dayLabels: dayLabels\n      });\n    };\n\n    this.manageHeight = () => {\n      let newHeight = this.props.timelineVals.length += 400;\n      this.setState({\n        height: newHeight\n      });\n    };\n\n    this._forgetValue = () => {\n      this.setState({\n        value: null\n      });\n    };\n\n    this._rememberValue = value => {\n      this.setState({\n        value\n      });\n    };\n\n    this.getposition = () => {\n      let elem = document.querySelector('#sticky-check');\n      let bounding = elem.getBoundingClientRect();\n      console.log(bounding);\n      let sticky = document.querySelector('#sticky');\n      let stickyTop = sticky.getBoundingClientRect();\n      console.log(stickyTop);\n      const plot = document.querySelector('.rv-xy-plot');\n      const plotA = plot.getBoundingClientRect();\n      const plotB = plot.getBoundingClientRect();\n      let plotTop = plotA.top;\n      let plotX = plotB.x; //   let plotTopNew = plotTop =- plotTop.x   \n\n      console.log(plotTop + ' ' + plotX); //   console.log(plotTopNew)\n      //let chartTop = document.querySelector('.rv-xy-plot__grid-lines')\n\n      let chartTop = document.querySelector('.rv-xy-plot__grid-lines');\n      let chartTopPos = chartTop.getBoundingClientRect();\n      console.log(chartTopPos);\n      let stickPos = bounding.top + bounding.height;\n      this.setState({\n        plotGap: plotA.height - (plotTop - plotX)\n      });\n      return this.setState({\n        gapVal: chartTopPos.bottom - stickPos,\n        stickyTop: stickyTop.top,\n        chartTop: chartTopPos.bottom - chartTopPos.top,\n        plotTop: plotTop - plotX\n      }); //if (scroll === bounding) {console.log('yey!'+ this.state.position)}\n    };\n  }\n\n  componentDidMount() {\n    this.getposition();\n    this.manageScrollDisplay();\n\n    if (typeof this.props.timelineVals[0] !== 'undefined') {\n      return this.formatData(), this.manageHeight();\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.scrollPositionY !== prevProps.scrollPositionY) {\n      this.getLevel();\n    }\n\n    if (this.props.timelineVals !== prevProps.timelineVals) return this.formatData(), this.manageHeight();\n\n    if (this.state.rawData !== prevState.rawData) {\n      this.scrollPlots;\n    }\n  }\n\n  // <i ref={(ref) => this.scrollIcon = ref} className=\"fa fa-2x fa-chevron-down\"></i>\n  render() {\n    //const {value} = this.state\n    let scroll = window.scrollY; // console.log(scrolledDown)\n\n    return React.createElement(\"div\", {\n      style: {\n        height: '800vh'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"sticky\",\n      onClick: event => this.scrollPlots(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, \"Carbon Intensity Level Vertical scroll position is: \", this.props.scrollPositionY, \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }), \"Carbon Intensity: \", this.state.getLevel, React.createElement(Table, {\n      id: \"sticky-table\",\n      unstackable: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, React.createElement(Table.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, React.createElement(Table.Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, React.createElement(Table.Cell, {\n      id: \"sticky-check\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, \"\\u27F5  Low\"), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, \"Medium\"), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, \"High  \\u27F6\"))))), React.createElement(\"div\", {\n      id: \"stickyMeasure\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"timeline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        // display: 'flex',\n        justifyContent: 'space-between',\n        position: 'relative',\n        width: '100%',\n        height: '800vh',\n        //height: `${this.state.height}vh`,\n        overflow: 'auto'\n      },\n      id: \"bg-fade\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: '100%',\n        height: '100%',\n        border: '1px solid #ccc'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }, React.createElement(FlexibleXYPlot, {\n      id: \"timeline-chart\",\n      margin: {\n        bottom: 80,\n        left: 80,\n        right: 20,\n        top: 50\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }, React.createElement(HorizontalGridLines, {\n      tickTotal: this.state.rawData.length,\n      animation: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }), React.createElement(LineSeries, {\n      data: this.state.rawData,\n      color: 'black',\n      animation: true,\n      style: {\n        fill: 'none',\n        strokeLinejoin: 'round',\n        strokeWidth: 8\n      },\n      curve: 'curveMonotoneX',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }), React.createElement(MarkSeries, {\n      onValueMouseOver: this._rememberValue,\n      onValueMouseOut: this._forgetValue,\n      data: this.state.rawData,\n      id: \"markSeries\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366\n      },\n      __self: this\n    }), React.createElement(LabelSeries, {\n      data: this.state.rawData // labelAnchorX={\"end\"}\n      // labelAnchorY={\"middle\"}\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374\n      },\n      __self: this\n    }), React.createElement(LabelSeries, {\n      data: this.state.labelData,\n      labelAnchorX: \"start\",\n      labelAnchorY: \"middle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }), React.createElement(LabelSeries, {\n      data: this.state.dayLabels,\n      labelAnchorX: \"end\",\n      labelAnchorY: \"middle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nexport default withScroll(Timeline);","map":{"version":3,"sources":["/Users/Chris/Development/Final-Project/carbon-forecast-frontend/src/components/Timeline.js"],"names":["React","Component","XYPlot","LineSeries","MarkSeries","HorizontalGridLines","Hint","XAxis","YAxis","Borders","VerticalGridLines","HorizontalBarSeries","GradientDefs","AreaSeries","FlexibleXYPlot","LabelSeries","Sticky","Header","Table","withScroll","Timeline","state","rawData","y","x","label","barPosition","date","offset","labelData","lable","height","middle","props","mediumLevel","value","stickyTop","plotTop","gapVal","scrollCount","initalScrollCounter","dataIndex","position","scrollPositionY","scrollPlots","getLevel","map","point","index","data","plotGap","level","setState","currY","newArray","obj","closest","reduce","prev","curr","Math","abs","found","find","currentLevel","manageScrollDisplay","console","log","step","chartTop","scroll","newIndex","parseDate","input","timeOrDate","output","optionsDate","weekday","day","month","optionsTime","hour","minute","hour12","options24","parsedDate","Date","UTC","parseInt","slice","toLocaleString","lowCarbonLabel","item","text","split","formatData","dayLabels","middleVal","timelineVals","bar","yOffset","barLabel","from","xOffset","dayLabel","mobileUser","manageHeight","newHeight","length","_forgetValue","_rememberValue","getposition","elem","document","querySelector","bounding","getBoundingClientRect","sticky","plot","plotA","plotB","top","plotX","chartTopPos","stickPos","bottom","componentDidMount","componentDidUpdate","prevProps","prevState","render","window","scrollY","event","justifyContent","width","overflow","border","left","right","fill","strokeLinejoin","strokeWidth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {XYPlot, LineSeries, MarkSeries, HorizontalGridLines, Hint, XAxis, YAxis, Borders, VerticalGridLines, HorizontalBarSeries, GradientDefs, AreaSeries, FlexibleXYPlot, LabelSeries} from 'react-vis';\nimport { Sticky, Header, Table } from 'semantic-ui-react';\nimport { withScroll } from 'react-window-decorators';\n\n// @withScroll\nclass Timeline extends Component {\n\n    state = {\n        rawData: [{y: 0, x: 0, label:'loading | loadidng'}],\n        barPosition: {date: '', offset: 0},\n        labelData: [{lable: 'Testing'}],\n        height: 50,\n        middle: typeof this.props.middle !== 'undefined' ? this.props.mediumLevel : 150,\n        value: null,\n       // position:1000,\n        stickyTop:0,\n        plotTop:0,\n        gapVal: 1000,\n        scrollCount: 0,\n        initalScrollCounter:0,\n        dataIndex: -1,\n        position: this.props.scrollPositionY,\n        scrollPlots: [],\n        getLevel:0\n    }\n\n\n    componentDidMount () {\n      this.getposition()\n      this.manageScrollDisplay()\n\n        if (typeof this.props.timelineVals[0] !== 'undefined'){\n          return (\n              this.formatData(),\n              this.manageHeight()\n              ) \n            }\n        }\n\n        \n        \n        componentDidUpdate (prevProps, prevState) {\n            if (this.props.scrollPositionY !== prevProps.scrollPositionY) {\n                this.getLevel()\n            }\n            if (this.props.timelineVals !== prevProps.timelineVals)\n            return (\n                this.formatData(),\n                this.manageHeight()\n                ) \n            if (this.state.rawData !== prevState.rawData)\n            {\n                this.scrollPlots\n\n            }\n\n\n            }\n\n\n    scrollPlots = () => {\n\n       let scrollPlots =  this.state.rawData.map((point, index) => {    \n        let data = {y: this.state.plotGap * (index+1), level: point.x}\n            return data\n        })\n\n        this.setState({scrollPlots: scrollPlots})\n    }\n\n    getLevel = () => {\n        \n        let currY = this.props.scrollPositionY\n\n        let newArray = this.state.scrollPlots.map(obj => {\n            return obj.y\n          })\n          \n           let closest = newArray.reduce((prev, curr) => {\n           return (Math.abs(curr - currY) < Math.abs(prev - currY) ? curr : prev);\n           })\n          \n          let found = this.state.scrollPlots.find(obj => {\n            return obj.y === closest\n          })\n          \n          this.setState({\n              currentLevel:found.level\n          })\n\n          //return found.level \n        \n        }\n\n\n  //var closest = counts.reduce(function(prev, curr) {\n  //return (Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev);\n\n\n    \n    \n    manageScrollDisplay = () => {\n        \n        let initalScrollCounter = this.state.initalScrollCounter < 1 ? this.state.gapVal + this.state.stickyTop : this.state.initalScrollCounter\n        //let dataIndex = 0\n        if (this.props.scrollPositionY >= initalScrollCounter) {\n            console.log('I love you chris!')\n        //this.setState({scrollCount: initalScrollCounter})\n            if (this.props.scrollPositionY >= initalScrollCounter + Math.abs(this.state.scrollCount)) {\n                //let newVal = this.state.scrollCount + this.state.gapVal\n                const step = this.state.chartTop - this.state.plotTop\n                console.log(\"Youve got this\" + this.state.scrollCount)\n                console.log(this.state.scrollCount)\n                const scroll = this.state.scrollCount + step\n                let newIndex = this.state.dataIndex + 1\n                 this.setState({scrollCount: scroll, dataIndex:newIndex})\n            }\n        }\n\n    }\n\n    \n\n    // mapTest = () => {\n    //     let test = this.state.rawData.map(item => {\n    //         return item.text.split('|')[0]})\n    //         console.log(`HiHi${test}`)\n    // }\n\n    // getMiddle = () => {\n    //     if (this.state.middle < 1) {\n    //     let middle = this.props.timelineVals[this.props.timelineVals.length-1].level / 2 \n    //     this.setState({middle: middle})\n    //     }\n    // }\n\n    parseDate = (input, timeOrDate) => {\n        let output = 0\n        let optionsDate = { weekday: 'short', day: 'numeric', month: 'numeric' };\n        let optionsTime = { hour: 'numeric',minute: 'numeric', hour12: true};\n        let options24 = { hour: 'numeric',minute: 'numeric', hour12: false};\n\n               let parsedDate = new Date(Date.UTC(\n                   parseInt(input.slice(0, 4), 10),\n                   parseInt(input.slice(5, 7), 10) - 1,\n                   parseInt(input.slice(8, 10), 10),\n                   parseInt(input.slice(11, 13), 10),\n                   parseInt(input.slice(14, 16), 10),\n                 //parseInt(input.slice(13,15), 10)\n               ))\n               if (timeOrDate === 'time'){\n                   output =  parsedDate.toLocaleString(\"en-GB\", optionsTime)\n               }else if (timeOrDate === 'date') {\n               output =  (`${parsedDate.toLocaleString(\"en-GB\", optionsDate)}`)\n               }else if (timeOrDate === '24') {\n               output =  parsedDate.toLocaleString(\"en-GB\", options24)\n              }\n\n\n            return output\n\n            }\n\n        lowCarbonLabel = (item) => {\n            let output = ''\n            if (item.text.split(' ')[0] === 'Low' || item.text.split(' ')[1] === 'Low' ) {\n                output = 'This is a good time to use electricity!'\n            }\n            return output\n        }\n\n       formatData = () => {\n        let data = []\n        let labelData = []\n        let dayLabels = []\n        let middleVal = this.props.middle\n        //let middle = this.props.timelineVals[this.props.timelineVals.length-1].level / 2 \n\n        if (this.props.timelineVals !== [] ) {\n\n        this.props.timelineVals.map((item, index) => {\n            let bar = {x: item.level-10, y: -index, label: `${this.lowCarbonLabel(item)}` , yOffset:-25}   \n            data = [...data, bar]\n        })\n        this.props.timelineVals.map((item, index) => {\n            let barLabel = {x: 0, y: -index, label: `${this.parseDate(item.from, 'time')}`, xOffset:-60}  \n            labelData = [...labelData, barLabel]\n        })\n        this.props.timelineVals.map((item, index) => {\n            \n           // let middle = this.props.screenWidth / 2\n           // let middle = this.state.rawData[this.state.rawData-1].x / 2 \n            //middle += 100\n            let day = ''\n\n            if (parseInt(`${this.parseDate(item.from, '24')}`) < 1 || index < 1 )\n            {\n                day = `${this.parseDate(item.from, 'date')}`\n                console.log(day)   \n            }\n            let dayLabel = {x: this.state.middle, y: -index, \n                label: day,\n                xOffset: this.props.mobileUser ? 0 : -30,\n                 yOffset:-15}  \n            dayLabels = [...dayLabels, dayLabel]\n        })\n    }\n       \n        //console.log(data)\n        \n        this.setState({\n            rawData: data,\n            labelData: labelData,\n            dayLabels: dayLabels\n        })    \n    \n    }\n    //day.sort((a, b) => (a.level > b.level)\n    manageHeight = () => {\n       let newHeight =  this.props.timelineVals.length += 400\n        this.setState({\n            height: newHeight\n        })\n    }\n\n    _forgetValue = () => {\n        this.setState({\n          value: null\n        });\n      };\n    \n      _rememberValue = value => {\n        this.setState({value});\n      };\n    \ngetposition = () => {\n      let elem = document.querySelector('#sticky-check');\n      let bounding = elem.getBoundingClientRect()      \n      console.log(bounding)\n\n      let sticky = document.querySelector('#sticky');\n      let stickyTop = sticky.getBoundingClientRect()      \n      console.log(stickyTop)\n\n      const plot = document.querySelector('.rv-xy-plot')\n      const plotA = plot.getBoundingClientRect()\n      const plotB = plot.getBoundingClientRect()\n\n      let plotTop = plotA.top\n      let plotX = plotB.x\n    //   let plotTopNew = plotTop =- plotTop.x   \n       console.log(plotTop + ' ' + plotX)\n    //   console.log(plotTopNew)\n\n      //let chartTop = document.querySelector('.rv-xy-plot__grid-lines')\n      let chartTop = document.querySelector('.rv-xy-plot__grid-lines')\n      let chartTopPos = chartTop.getBoundingClientRect() \n\n      console.log(chartTopPos)\n      let stickPos = bounding.top + bounding.height\n      this.setState({plotGap: plotA.height - (plotTop - plotX)})\n      return this.setState({gapVal:chartTopPos.bottom - stickPos, stickyTop: stickyTop.top, chartTop:chartTopPos.bottom - chartTopPos.top, plotTop:(plotTop - plotX)})\n      \n      //if (scroll === bounding) {console.log('yey!'+ this.state.position)}\n    }\n\n\n    // <i ref={(ref) => this.scrollIcon = ref} className=\"fa fa-2x fa-chevron-down\"></i>\n\n\n    render() {\n        //const {value} = this.state\n        let scroll = window.scrollY;\n        // console.log(scrolledDown)\n      \n        \n        return (\n            <div\n            style={{\n                height: '800vh'\n            }}\n            >\n          <div id=\"sticky\" onClick={(event => this.scrollPlots())}> \n        \n            Carbon Intensity Level\n            Vertical scroll position is: { this.props.scrollPositionY } <br></br>\n            {/* Carbon Intensity: {typeof this.state.rawData[this.state.dataIndex] !== 'undefined' ? this.state.rawData[this.state.dataIndex].x : 0} */}\n            Carbon Intensity: {this.state.getLevel}\n          <Table id=\"sticky-table\" unstackable >\n\n            <Table.Body>\n           \n\n            <Table.Row>\n            <Table.Cell id=\"sticky-check\">⟵  Low</Table.Cell>\n            <Table.Cell>Medium</Table.Cell>\n            <Table.Cell>High  ⟶</Table.Cell>\n            </Table.Row>\n            </Table.Body>\n          </Table>\n          \n          </div>\n          <div id=\"stickyMeasure\">\n          </div>\n\n                <div id=\"timeline\">\n<div\n        \n      style={{\n          // display: 'flex',\n          justifyContent: 'space-between',\n          position: 'relative',\n          width:  '100%',\n          height: '800vh',\n          //height: `${this.state.height}vh`,\n          overflow: 'auto',\n        }}\n      id=\"bg-fade\"\n\n      \n    >\n\n\n\n<div\n        style={{width: '100%', height: '100%', border: '1px solid #ccc'}}\n      >\n        <FlexibleXYPlot  id=\"timeline-chart\" margin={{bottom: 80, left: 80, right: 20, top: 50}}>\n        {/* xType=\"time\" \n         yType=\"ordinal\"\n        */}\n        \n\n        <HorizontalGridLines \n        tickTotal={this.state.rawData.length}\n        animation={true}\n        />\n     \n        {/* <YAxis \n        position=\"start\"\n        tickTotal={2}\n        // top={40}\n        top={0}\n        //height={150}\n        //width={1}\n        style={{\n            text: {stroke: 'none', fill: '#6b6b76', fontWeight: 800, fontSize: 10}\n          }}\n          //tickLabelAngle={-45}\n          /> */}\n        \n        \n        <LineSeries \n        data={this.state.rawData}\n        color={'black'}\n        animation\n        style={{\n            fill: 'none',\n            strokeLinejoin: 'round',\n            strokeWidth: 8\n        }}\n        curve={'curveMonotoneX'}\n        />\n\n        <MarkSeries\n          onValueMouseOver={this._rememberValue}\n          onValueMouseOut={this._forgetValue}\n          data={this.state.rawData}\n          id=\"markSeries\"\n        />\n        {/* {value ? <Hint value={value} /> : null} */}\n\n        <LabelSeries\n        data={this.state.rawData}\n        // labelAnchorX={\"end\"}\n        // labelAnchorY={\"middle\"}\n        />\n        <LabelSeries\n        data={this.state.labelData}\n        labelAnchorX={\"start\"}\n        labelAnchorY={\"middle\"}\n        />\n\n        <LabelSeries\n        data={this.state.dayLabels}\n        \n        labelAnchorX={\"end\"}\n        labelAnchorY={\"middle\"}\n        />\n\n\n\n        {/* <HorizontalBarSeries \n        data={this.state.rawData}\n        color={'url(#CoolGradient)'}\n        animation\n        /> */}\n\n         {/* <YAxis \n         position=\"start\"\n         tickValues={this.state.rawData.map(value => value.y)} \n         tickSize={1}\n         />  */}\n\n{/*\n            //data={this.xlabelData('top')}\n                //return { ...obj, y: this.props.mobileUser ? -3 : -18, rotation: this.props.mobileUser ? 90 : 0, label: `${obj.y.split('|')[0]}` }\n            //animation\n            // labelAnchorX={this.props.mobileUser ? \"start\" : \"middle\"}\n            // //labelAnchorY=\"text-before-edge\"\n            // labelAnchorY={this.props.mobileUser ? \"text-after-edge\" : \"baseline\"}\n            // labelAnchorX={\"middle\"}\n            // labelAnchorY={\"text-before-edge\"}\n            // style={{\n            //     text: {stroke: 'none', fill: '#6b6b76', fontWeight: 800, fontSize: 10}\n            //   }}\n        {/* \n        <LabelSeries\n                    data={this.state.rawData.map(obj => {\n                        return { ...obj, label: obj.y.toString() }\n                    })}\n                    \n                    animation\n                    labelAnchorX=\"middle\"\n                    labelAnchorY=\"text-before-edge\"\n                    \n                    />\n\n\n\n        <LabelSeries\n                    data={this.state.rawData.map(obj => {\n\n                        return { ...obj, y: this.props.mobileUser ? -3 :-34, rotation: this.props.mobileUser ? 90 : 0, label: `${obj.y.split('|')[1]}` }\n                    })}\n                    animation\n                    labelAnchorX={this.props.mobileUser ? \"start\" : \"middle\"}\n                    //labelAnchorY=\"text-before-edge\"\n                    //labelAnchorY=\"baseline\"\n                    labelAnchorY={this.props.mobileUser ? \"text-before-edge\" : \"baseline\"}\n                    style={{\n                        text: {stroke: 'none', fill: '#6b6b76', fontWeight: 800, fontSize: 10}\n                      }}\n                    /> */}\n\n\n\n        </FlexibleXYPlot>\n      </div>\n\n</div>\n     \n\n        </div>\n        \n\n            </div>\n        );\n    }\n}\n\nexport default withScroll (Timeline);\n"]},"metadata":{},"sourceType":"module"}